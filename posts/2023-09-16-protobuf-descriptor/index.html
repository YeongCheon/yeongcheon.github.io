<!doctype html><html lang=ko><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Descriptor of Protobuf - 김영천 블로그</title><meta name=Description content="Learn to be Lazy"><meta property="og:title" content="Descriptor of Protobuf"><meta property="og:description" content="Descriptor의 정의와 목적 protobuf에는 Descriptor라는 개념이 있습니다. 각 출처별로 Descriptor의 정의에 대해 알아보"><meta property="og:type" content="article"><meta property="og:url" content="https://yeongcheon.github.io/posts/2023-09-16-protobuf-descriptor/"><meta property="og:image" content="https://yeongcheon.github.io/posts/2023-09-16-protobuf-descriptor/images/grpc-logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-09-16T01:00:00+09:00"><meta property="article:modified_time" content="2023-09-16T22:54:35+09:00"><meta property="og:site_name" content="김영천 블로그"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://yeongcheon.github.io/posts/2023-09-16-protobuf-descriptor/images/grpc-logo.png"><meta name=twitter:title content="Descriptor of Protobuf"><meta name=twitter:description content="Descriptor의 정의와 목적 protobuf에는 Descriptor라는 개념이 있습니다. 각 출처별로 Descriptor의 정의에 대해 알아보"><meta name=application-name content="김영천 블로그"><meta name=apple-mobile-web-app-title content="김영천 블로그"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://yeongcheon.github.io/posts/2023-09-16-protobuf-descriptor/><link rel=prev href=https://yeongcheon.github.io/posts/2023-08-26/android-webview-firebase-auth-error/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=/lib/fontawesome-free/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload href=/lib/animate/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><meta name=google-site-verification content="H-82h77dqtsTaOMUy7Ygl0t2MKqA_dYxGjcE-5A-Vhk"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Descriptor of Protobuf","inLanguage":"ko","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/yeongcheon.github.io\/posts\/2023-09-16-protobuf-descriptor\/"},"image":[{"@type":"ImageObject","url":"https:\/\/yeongcheon.github.io\/posts\/2023-09-16-protobuf-descriptor\/images\/grpc-logo.png","width":3968,"height":1734}],"genre":"posts","keywords":"grpc, protobuf","wordcount":813,"url":"https:\/\/yeongcheon.github.io\/posts\/2023-09-16-protobuf-descriptor\/","datePublished":"2023-09-16T01:00:00+09:00","dateModified":"2023-09-16T22:54:35+09:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"yeongcheon"},"description":""}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1746942287310414" crossorigin=anonymous></script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="김영천 블로그"><img class="lazyload logo" src=/svg/loading.min.svg data-src=/images/profile_no_background.png data-srcset="/images/profile_no_background.png, /images/profile_no_background.png 1.5x, /images/profile_no_background.png 2x" data-sizes=auto alt=/images/profile_no_background.png title=/images/profile_no_background.png>김영천 블로그<span class=header-title-post><sup>"Learn to be Lazy"</sup></span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/about/>About </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title="테마 변경">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="김영천 블로그"><img class="lazyload logo" src=/svg/loading.min.svg data-src=/images/profile_no_background.png data-srcset="/images/profile_no_background.png, /images/profile_no_background.png 1.5x, /images/profile_no_background.png 2x" data-sizes=auto alt=/images/profile_no_background.png title=/images/profile_no_background.png>김영천 블로그<span class=header-title-post><sup>"Learn to be Lazy"</sup></span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/about/ title>About</a><a href=javascript:void(0); class="menu-item theme-switch" title="테마 변경">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>목차</h2><div class="toc-content always-active" id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Descriptor of Protobuf</h1><h2 class=single-subtitle>Protobuf의 Descriptor에 대해 알아봅니다.</h2><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://github.com/yeongcheon title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>yeongcheon</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2023-09-16>2023-09-16</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;813 단어&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;읽는데 약 2분&nbsp;</div></div><div class=featured-image><img class=lazyload src=/svg/loading.min.svg data-src=/posts/2023-09-16-protobuf-descriptor/images/grpc-logo.png data-srcset="/posts/2023-09-16-protobuf-descriptor/images/grpc-logo.png, /posts/2023-09-16-protobuf-descriptor/images/grpc-logo.png 1.5x, /posts/2023-09-16-protobuf-descriptor/images/grpc-logo.png 2x" data-sizes=auto alt=/posts/2023-09-16-protobuf-descriptor/images/grpc-logo.png title=/posts/2023-09-16-protobuf-descriptor/images/grpc-logo.png></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>목차</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#headline-1>Descriptor의 정의와 목적</a><ul><li><a href=#headline-2>출처: Buf</a><ul><li><a href=#headline-3>정의</a></li><li><a href=#headline-4>목적</a></li></ul></li><li><a href=#headline-5>출처: Chat GPT</a><ul><li><a href=#headline-6>정의</a></li><li><a href=#headline-7>목적</a></li></ul></li></ul></li><li><a href=#headline-8>Descriptor(.pb) 생성 방법</a></li><li><a href=#headline-9>실제 사용 예</a></li><li><a href=#headline-10>마치며</a></li></ul></nav></div></div><div class=content id=content><div id=outline-container-headline-1 class=outline-2><h2 id=headline-1>Descriptor의 정의와 목적</h2><div id=outline-text-headline-1 class=outline-text-2><p>protobuf에는 Descriptor라는 개념이 있습니다. 각 출처별로 Descriptor의 정의에 대해 알아보고자 합니다.</p><div id=outline-container-headline-2 class=outline-3><h3 id=headline-2>출처: Buf</h3><div id=outline-text-headline-2 class=outline-text-3><div id=outline-container-headline-3 class=outline-4><h4 id=headline-3>정의</h4><div id=outline-text-headline-3 class=outline-text-4><p><a href=https://buf.build/docs/reference/descriptors>이 곳</a>에 설명된 정의에 따르면 Descriptor의 정의는 다음과 같습니다.</p><blockquote><p>The term “descriptors” refers to models that describe the data types defined in Protobuf sources. They resemble an AST (Abstract Syntax Tree) of the Protobuf IDL, using Protobuf messages for the tree nodes.</p><p>"descriptor"라는 용어는 Protobuf 소스에 정의된 데이터 유형을 설명하는 모델을 의미합니다. 이는 트리 노드에 Protobuf 메시지를 사용하는 Protobuf IDL의 AST(추상 구문 트리)와 유사합니다.</p></blockquote></div></div><div id=outline-container-headline-4 class=outline-4><h4 id=headline-4>목적</h4><div id=outline-text-headline-4 class=outline-text-4><ul><li><strong>Code generation</strong></li><li><strong>Reflection</strong></li><li><strong>Dynamic messages & dynamic RPC</strong></li></ul></div></div></div></div><div id=outline-container-headline-5 class=outline-3><h3 id=headline-5>출처: Chat GPT</h3><div id=outline-text-headline-5 class=outline-text-3><div id=outline-container-headline-6 class=outline-4><h4 id=headline-6>정의</h4><div id=outline-text-headline-6 class=outline-text-4><blockquote><p>descriptor는 protobuf 메세지와 서비스에 대한 메타데이터를 이진 형태로 포함하는 파일입니다. 이 메타데이터는 메시지의 구조, 필드의 이름, 유형 등을 설명하며, 런타임 중에 프로그램이 protobuf 메세지를 인식하고 다루는 데 사용됩니다.</p></blockquote></div></div><div id=outline-container-headline-7 class=outline-4><h4 id=headline-7>목적</h4><div id=outline-text-headline-7 class=outline-text-4><ul><li><strong>동적 로딩(Dynamic Loading)</strong>: 프로그램이 런타임 중에 Protocol Buffers 메시지를 동적으로 로드하고 사용할 때 유용합니다. 이는 플러그인 시스템이나 플러그인 아키텍처를 구현할 때 특히 유용합니다.</li><li><strong>API 문서 생성</strong>: 디스크립터 세트를 사용하여 프로그램의 API 문서를 생성할 수 있습니다. 이는 서비스와 메시지를 설명하고 문서화하는 데 도움이 됩니다.</li><li><strong>기타 메타정보 활용</strong>: 프로그램이 Protocol Buffers 메시지를 처리하거나 저장할 때 메타정보가 필요한 경우에 활용될 수 있습니다.</li></ul></div></div></div></div></div></div><div id=outline-container-headline-8 class=outline-2><h2 id=headline-8>Descriptor(.pb) 생성 방법</h2><div id=outline-text-headline-8 class=outline-text-2><p><a href=https://grpc.io/docs/protoc-installation/>protoc</a> 명령어를 기준으로 Descriptor를 생성하는 방법은 다음과 같습니다.</p><div class="src src-bash"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>protoc <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --include_imports <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --proto_path<span class=o>=</span>. <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --descriptor_set_out<span class=o>=</span>example_descriptor.pb <span class=se>\ </span><span class=c1># descriptor 파일 생성</span>
</span></span><span class=line><span class=cl>    example.proto</span></span></code></pre></td></tr></table></div></div></div></div></div><div id=outline-container-headline-9 class=outline-2><h2 id=headline-9>실제 사용 예</h2><div id=outline-text-headline-9 class=outline-text-2><p>제가 실제로 겪어본 Descriptor가 사용되는 케이스는 다음과 같습니다.</p><ul><li><a href=https://github.com/fullstorydev/grpcurl#descriptor-sources>Descriptor Source를 활용한 grpcurl 호출</a></li><li><a href="https://cloud.google.com/endpoints/docs/grpc/transcoding?hl=ko">GCP endpoints 제품에서 HTTP/JSON을 gRPC로 트랜스코딩</a></li></ul></div></div><div id=outline-container-headline-10 class=outline-2><h2 id=headline-10>마치며</h2><div id=outline-text-headline-10 class=outline-text-2><p>Descriptor는 proto 파일을 실제 개발자가 사용할 <a href=https://protobuf.com/docs/descriptors>코드를 생성할 때 사용되는 요소</a>입니다. 보통 Server/Client 프로그램을 작성할 때는 다룰 일이 많지 않습니다만, 위에서 언급한 예처럼 사용할 일이 종종 있으니 간단한 내용만이라도 숙지하고 있는 것이 좋겠습니다.</p></div></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>수정: 2023-09-16</span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/posts/2023-09-16-protobuf-descriptor/index.md target=_blank>마크다운 읽기</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="공유하기 Twitter" data-sharer=twitter data-url=https://yeongcheon.github.io/posts/2023-09-16-protobuf-descriptor/ data-title="Descriptor of Protobuf" data-hashtags=grpc,protobuf><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="공유하기 Facebook" data-sharer=facebook data-url=https://yeongcheon.github.io/posts/2023-09-16-protobuf-descriptor/ data-hashtag=grpc><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="공유하기 Hacker News" data-sharer=hackernews data-url=https://yeongcheon.github.io/posts/2023-09-16-protobuf-descriptor/ data-title="Descriptor of Protobuf"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="공유하기 Pocket" data-sharer=pocket data-url=https://yeongcheon.github.io/posts/2023-09-16-protobuf-descriptor/><i class="fab fa-get-pocket fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/grpc/>grpc</a>,&nbsp;<a href=/tags/protobuf/>protobuf</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>뒤로</a></span>&nbsp;|&nbsp;<span><a href=/>홈</a></span></section></div><div class=post-nav><a href=/posts/2023-08-26/android-webview-firebase-auth-error/ class=prev rel=prev title="Android WebView에서 firebase Auth 오류 해결하기"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Android WebView에서 firebase Auth 오류 해결하기</a></div></div><div id=comments><div id=disqus_thread class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://disqus.com/?ref_noscript>Disqus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.118.2">Hugo</a>로 제작된 사이트 | 테마 - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2017 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://github.com/yeongcheon target=_blank>YeongCheon Kim</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="맨 위로"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="댓글 보기"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=https://yeongcheon.disqus.com/embed.js defer></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js></script><script type=text/javascript src=/lib/katex/contrib/auto-render.min.js></script><script type=text/javascript src=/lib/katex/contrib/copy-tex.min.js></script><script type=text/javascript src=/lib/katex/contrib/mhchem.min.js></script><script type=text/javascript src=/lib/cookieconsent/cookieconsent.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"복사하기",maxShownLines:50},comment:{},cookieconsent:{content:{dismiss:"알겠습니다",link:"더 보기",message:"본 웹사이트는 웹 환경 개선을 위해 쿠키를 사용합니다."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1}}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0YT8RHXZR3",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-0YT8RHXZR3" async></script></body></html>