<!DOCTYPE html>
<html lang="ko-ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <title>꿀테크 블로그</title>
  <meta property="og:title" content="꿀테크 블로그" />
  <meta name="twitter:title" content="꿀테크 블로그" />
  <meta name="author" content="YeongCheon Kim"/>
  <meta property="og:site_name" content="꿀테크 블로그" />
  <meta property="og:url" content="https://yeongcheon.github.io/" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary" />
  <meta name="generator" content="Hugo 0.66.0" />
  <link href="/index.xml" rel="alternate" type="application/rss+xml" title="꿀테크 블로그" />
  <link href="/index.xml" rel="feed" type="application/rss+xml" title="꿀테크 블로그" />

  <link rel="stylesheet" href="/css/style.css" media="all" />
  <link rel="stylesheet" href="/css/syntax.css" media="all" />
  <link rel="stylesheet" href="/css/custom.css" media="all" />

  <script src="/js/script.js"></script>
  <script src="/js/custom.js"></script>
  <script defer src="/js/fontawesome.js"></script>
</head>

<body>

<header class="site-header">
  <nav class="site-navi">
    <h1 class="site-title"><a href="/">꿀테크 블로그</a></h1>
    <ul class="site-navi-items">
      <li class="site-navi-item-tags"><a href="/tags/" title="Tags">Tags</a></li>
      <li class="site-navi-item-archives"><a href="/posts/" title="Archives">Archives</a></li>
      <li class="site-navi-item-about"><a href="/about/" title="About">About</a></li>
    </ul>
  </nav>
</header>
<hr class="site-header-bottom">

  <div class="main" role="main">
    <section class="list home-list">
      <article class="article">
        <a href="/posts/2019-03-01-jpa-jackson/" class="article-titles">
          <h2 class="article-title">jackson을 이용해 json 변환 시 JPA entity의 id값만 추출하기</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>March 1, 2019</time></li>
          <li class="article-meta-tags">
            <a href="/tags/json/">
              <i class="fas fa-tag"></i>
              json
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="/tags/jackson/">
              <i class="fas fa-tag"></i>
              jackson
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="/tags/jpa/">
              <i class="fas fa-tag"></i>
              jpa
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="/tags/kotlin/">
              <i class="fas fa-tag"></i>
              kotlin
            </a>&nbsp;
          </li>
        </ul>
        <div class="article-content">
          들어가며   REST API 서버를 java언어에서 사용되는 대표적인 json(또는 xml, yaml, etc…) 라이브러리인 jackson 은 kotlin에서도 사용이 가능하다. JPA를 사용하다보면 entity를 json형식으로 반환할 때 해당 entity가 다른 entity를 필드로 참조하고 있을 경우 참조하는 entity의 id값만을 반환하고 싶을 경우가 있다. 이 문제를 jackson을 이용해 json형식으로 이쁘게 변환하는 법을 알아보자. 요구사항   데이터베이스에는 현재 user 테이블과 shelter 테이블이 존재한다. shelter 테이블에는 user 테이블을 참조는 외래키 제약조건이 걸려있다. 자세한 내용은 다음 섹션의 소스코드를 참고해보자.
        </div>
        <div class="article-readmore"><a href="/posts/2019-03-01-jpa-jackson/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="/posts/2018-11-11-springboot-jpa-cloudsql-connect/" class="article-titles">
          <h2 class="article-title">appengine &#43; springboot &#43; kotlin &#43; jpa &#43; cloudsql 연동하기</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>November 11, 2018</time></li>
          <li class="article-meta-tags">
            <a href="/tags/spring/">
              <i class="fas fa-tag"></i>
              spring
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="/tags/jpa/">
              <i class="fas fa-tag"></i>
              jpa
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="/tags/gae/">
              <i class="fas fa-tag"></i>
              gae
            </a>&nbsp;
          </li>
        </ul>
        <div class="article-content">
          회사에서 새로 시작하는 API 서버 개발에 아래와 같은 환경을 적용하기로 했다.
 구동환경 : Google App Engine Standard Environment 언어 : kotlin 1.3 framework : Spring Boot 2.0.2.RELEASE DB : cloud sql(MySQL 5.7) ORM : hibernate/JPA IDE: IntelliJ Ultimate  각각 놓고보면 다들 유명하고 널리 쓰이는 기술들이지만 얘들을 한꺼번에 적용한 가이드라인이 없어서 내가 직접 가이드를 작성해볼까 한다. A to Z 형식의 가이드는 아니고 셋팅 중 삽질을 크게 했던 부분 위주로 작성해보도록 하겠다.
        </div>
        <div class="article-readmore"><a href="/posts/2018-11-11-springboot-jpa-cloudsql-connect/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="/posts/2018-09-27-emacs-selectall/" class="article-titles">
          <h2 class="article-title">emacs에서 커서이동 없이 buffer 전체 복사하기</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>September 27, 2018</time></li>
          <li class="article-meta-tags">
            <a href="/tags/emacs/">
              <i class="fas fa-tag"></i>
              emacs
            </a>&nbsp;
          </li>
        </ul>
        <div class="article-content">
          보편적인 현대 에디터에서 ctrl-a ctrl-c, 그러니까 현재 편집중인 파일의 모든 내용을 선택해서 복사하는 방법을 이맥스에서 사용하는 방법을 알아보자.
원래는 어떻게 쓰고 있었어요? 내가 원래 쓰던 방법은 커서를 버퍼 최상단으로 이동시킨 뒤 마크 세팅, 그리고 커서를 버퍼 마지막으로 이동시킨 뒤 복사하는 방법을 사용했었다. 단축키로 표현하자면 아래와 같다.
M - &lt;, M - SPC, M - &gt;, M - w
이 방법을 사용하면 복사 자체는 문제가 없지만 커서가 항상 버퍼 마지막에 위치하게 된다는 문제가 있다.
        </div>
        <div class="article-readmore"><a href="/posts/2018-09-27-emacs-selectall/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="/posts/2018-09-21-tslint-in-emacs/" class="article-titles">
          <h2 class="article-title">emacs에서 tslint 이용하기</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>September 21, 2018</time></li>
          <li class="article-meta-tags">
            <a href="/tags/emacs/">
              <i class="fas fa-tag"></i>
              emacs
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="/tags/typescript/">
              <i class="fas fa-tag"></i>
              typescript
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="/tags/angular/">
              <i class="fas fa-tag"></i>
              angular
            </a>&nbsp;
          </li>
        </ul>
        <div class="article-content">
          나는 angular6를 이용해 웹 프로젝트를 진행하는걸 선호하는데 툴은 emacs를 주로 쓰고있다(OS는 ubuntu). vscode를 쓸까 했는데 그냥 이맥스가 좋아서(이유는 없다) 이맥스에 꾸역꾸역 개발환경을 구축했다. tide를 이용해서 환경을 구성했는데 tslint가 작동하지 않아서 잠깐 했던 삽질을 여기에 짤막하게 기록한다.
vscode는 그냥 되던데? 이게 내가 헤매게 된 가장 큰 이유다. vscode는 마켓플레이스에 그냥 tslint 패키지를 내려받으면 알아서 잘 동작한다. 개발자가 따로 뭐 설정하고 해줄 필요가 없다.(물론 tslint.json이 필요하지만 angular 프로젝트는 생성 시 지가 알아서 만들어준다.
        </div>
        <div class="article-readmore"><a href="/posts/2018-09-21-tslint-in-emacs/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="/posts/2018-08-01-s2-geometry/" class="article-titles">
          <h2 class="article-title">S2 library를 이용하여 가까운 위치의 사용자 찾기</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>August 5, 2018</time></li>
          <li class="article-meta-tags">
            <a href="/tags/gae/">
              <i class="fas fa-tag"></i>
              GAE
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="/tags/golang/">
              <i class="fas fa-tag"></i>
              golang
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="/tags/geometry/">
              <i class="fas fa-tag"></i>
              geometry
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="/tags/s2/">
              <i class="fas fa-tag"></i>
              S2
            </a>&nbsp;
          </li>
        </ul>
        <div class="article-content">
          구글에서 제공하는 S2 라이브러리를 이용하여 현재 내 위치에서 가장 가까운 사용자 목록을 추출해보자. 서버 환경은 GAE, golang standard environment 이다. 이 글을 참고했다.
S2 라이브러리란? S2 라이브러리는 구글에서 비공식적으로(not an official) 제공하는 구(球)형상 라이브러리이다(번역기 발췌). 기존의 대다수 라이브러리는 2차원 평면을 기준으로 좌표시스템을 구축하였지만 S2 라이브러리는 3차원 구를 기준으로 좌표계를 사용한다. 실제 지구는 평면보단 구(球)에 훨씬 가깝기 때문에 좀 더 정교하고 왜곡없는 지리 데이터베이스를 구축할 수 있다(이 역시 번역기 발췌).
추가로 geohash와 비교해보면 도움이 많이 된다.
        </div>
        <div class="article-readmore"><a href="/posts/2018-08-01-s2-geometry/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="/posts/2018-06-10-gae-image-api/" class="article-titles">
          <h2 class="article-title">Google App Engine Image API 삽질 후기</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>June 10, 2018</time></li>
          <li class="article-meta-tags">
            <a href="/tags/gcp/">
              <i class="fas fa-tag"></i>
              GCP
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="/tags/gae/">
              <i class="fas fa-tag"></i>
              GAE
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="/tags/golang/">
              <i class="fas fa-tag"></i>
              golang
            </a>&nbsp;
          </li>
        </ul>
        <div class="article-content">
          오늘은 GAE에서 제공하는 Image API를 사용하면서 겪은 어려움과 후기를 공유하고자 한다.
요구사항  GAE를 통해 업로드 된 이미지를 Google Cloud Storage(이하 GCS)에 보관, 파일 관련 정보를 datastore에 별도로 저장한다(업로드 한 사용자, 업로드 파일명, 업로드 날짜 등등). 이 이미지를 웹사이트를 통해 서비스를 하고싶다. 이 이미지는 사이즈가 모두 제각각인데 DSLR로 찍은 수십메가짜리 이미지부터 조그마한 썸네일 이미지까지 크기가 천차만별이다. 동일한 이미지를 여러가지 사이즈로 출력해야 한다. 가령 DSLR로 찍은 이미지를 제공할 경우 우선 100px짜리 썸네일로 제공, 사용자가 썸네일을 클릭할 경우 이미지의 원본을 보여주고 싶다.
        </div>
        <div class="article-readmore"><a href="/posts/2018-06-10-gae-image-api/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="/posts/2018-05-12-datastore-projection-error/" class="article-titles">
          <h2 class="article-title">datastore에서 projection query 실행 시 time.Time이 int64로 반환되는 문제 해결하기</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>May 12, 2018</time></li>
          <li class="article-meta-tags">
            <a href="/tags/gcp/">
              <i class="fas fa-tag"></i>
              GCP
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="/tags/gae/">
              <i class="fas fa-tag"></i>
              GAE
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="/tags/golang/">
              <i class="fas fa-tag"></i>
              golang
            </a>&nbsp;
          </li>
        </ul>
        <div class="article-content">
          요구사항 datastore에 내 프로필을 방문한 사용자의 ID와 방문시간을 각각 string, time.Time 형식으로 저장하고 있다. 구조체로 보면 다음과 같다.
type Visitor struct { UserId string //조회한 프로필의 Id 	VisitorId string //방문자 Id 	VisitTime time.Time } 이 데이터를 단순히 조회하면 한 사용자가 나를 여러번 방문할 경우 결과 리스트에 그 방문자가 여러번 출력된다. 나는 동일한 사용자가 여러번 반복해도 가장 최근에 방문한 기록만 보길 원했다. 즉 datastore에서 SQL 문법의 group by를 사용하고 싶었다.
        </div>
        <div class="article-readmore"><a href="/posts/2018-05-12-datastore-projection-error/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="/posts/2018-04-29-gae-datastore-indexes/" class="article-titles">
          <h2 class="article-title">Googlde App Engine(GAE) datastore index 관련 에러 해결하기</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>April 29, 2018</time></li>
          <li class="article-meta-tags">
            <a href="/tags/gcp/">
              <i class="fas fa-tag"></i>
              GCP
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="/tags/gae/">
              <i class="fas fa-tag"></i>
              GAE
            </a>&nbsp;
          </li>
        </ul>
        <div class="article-content">
          들어가며 google app engine을 이용해 REST API를 작성하던 중 발생했던 datastore의 index 관련 이슈와 그 해결법에 대해 기록한다. 참고, 여기도 참고
에러발생 상황 내 프로필을 조회한 사람들의 목록을 반환해주는 API를 작성했다. 코드는 딱히 별거 없고 그냥 datastore에 있는 데이터들을 불러오는 내용이다. 핵심코드는 아래와 같다.
q := datastore.NewQuery(userDao.VisitorEntity).Filter(&#34;UserId=&#34;, userId).Order(&#34;-VisitTime&#34;) UserId 필드의 값을 기준으로 필터링을 하고 VisitTime을 최근순으로 정렬하는 간단한 코드다. 위 쿼리문을 베이스로 한 API는 로컬테스트는 무사히 통과하고 배포까지 정상적으로 완료, 이 후 클라우드에 올라간 API를 테스트 했는데 다음과 같은 에러로그를 내뿜었다.
        </div>
        <div class="article-readmore"><a href="/posts/2018-04-29-gae-datastore-indexes/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="/posts/2018-02-08-emacs-command/" class="article-titles">
          <h2 class="article-title">emacs 명령어 목록</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>February 4, 2018</time></li>
          <li class="article-meta-tags">
            <a href="/tags/emacs/">
              <i class="fas fa-tag"></i>
              emacs
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="/tags/editor/">
              <i class="fas fa-tag"></i>
              editor
            </a>&nbsp;
          </li>
        </ul>
        <div class="article-content">
          emacs 명령어 목록  이맥스를 쓰면서 개인적으로 유용하게 쓰고있는 명령어 리스트, 대부분 M-x를 누른 후 실행한다.
 common   grep : grep을 이용한 문자열 검색 (lgrep, rgrep도 있다.). 위키링크
  find-name-dired : 특정 폴더 아래에서 지정된 파일이름 패턴과 동일한 목록을 뽑아 dired모드로 출력해주는 명령어. 폴더 아래의 모든 파일에서 replace 명령어를 수행할 때 유용하다. 링크
특정폴더 아래의 모든 파일(하위폴더 포함)에서 replace를 실행하는 방법
 M-x find-name-dired 명령어 실행 후 폴더 지정, 파일패턴 지정 t를 눌러서 dired 모드에 있는 모든 목록을 선택 Q를 눌러서 Query-Replace in Files.
        </div>
        <div class="article-readmore"><a href="/posts/2018-02-08-emacs-command/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
      <article class="article">
        <a href="/posts/2017-12-26-emacs-shortcut/" class="article-titles">
          <h2 class="article-title">emacs 단축키 목록</h2>
          
        </a>
        <ul class="article-meta">
          <li class="article-meta-date"><time>December 26, 2017</time></li>
          <li class="article-meta-tags">
            <a href="/tags/emacs/">
              <i class="fas fa-tag"></i>
              emacs
            </a>&nbsp;
          </li>
          <li class="article-meta-tags">
            <a href="/tags/editor/">
              <i class="fas fa-tag"></i>
              editor
            </a>&nbsp;
          </li>
        </ul>
        <div class="article-content">
          emacs 단축키 목록  아래의 단축키들은 그누 이맥스 시작하기(한빛미디어) 책을 보면서 정리한 내용들입니다.
 common  C-x s : 모든 버퍼 저장(y, n 또는 !) C-x C-q : 버퍼 읽기/쓰기 전용상태로 swap C-x C-x : 선택영역 끝간 이동 C-t : 글자 순서 바꾸기(toggle) M-t : 단어 순서 바꾸기 C-x C-t : 문장 순서 바꾸기 M-c : 단어의 첫 글자만 대문자로 바꾸기 M-u : 한 단어를 대문자로 바꾼다. M-l : 한 단어를 소문자로 바꾼다.
        </div>
        <div class="article-readmore"><a href="/posts/2017-12-26-emacs-shortcut/">Read more...</a></div>
        <div class="article-floatclear"></div>
      </article>
    </section>
    

<ul class="pagination">
    
    <li class="page-item">
        <a href="/" class="page-link" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
    </li>
    
    <li class="page-item">
    <a href="/" class="page-link" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
    </li>
    
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/">1</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item active"><a class="page-link" href="/page/2/">2</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/page/3/">3</a></li>
    
    
    <li class="page-item">
    <a href="/page/3/" class="page-link" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
    </li>
    
    <li class="page-item">
        <a href="/page/3/" class="page-link" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
    </li>
    
</ul>


  </div>



<div class="site-footer">
  <div class="copyright">&copy; Copyright 2019 YeongCheon</div>
  <ul class="site-footer-items">
    <li class="site-footer-item-rsslink">
      <a href="/index.xml" type="application/rss+xml" target="_blank" title="RSS">
        <i class="fas fa-rss"></i>
      </a>
    </li>
    <li class="site-footer-item-about"><a href="/about/" title="About">About</a></li>
  </ul>
  <div class="powerdby">
    Powered by <a href="https://gohugo.io/">Hugo</a> and <a href="https://github.com/taikii/whiteplain">Whiteplain</a>
  </div>
</div>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-135478508-1', 'auto');
	
	ga('send', 'pageview');
}
</script>


</body>
<script data-ad-client="ca-pub-4599234083355765" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</html>
